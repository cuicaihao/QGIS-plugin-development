<!DOCTYPE html>
<!-- saved from url=(0069)https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/">

    <title>Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips</title>
    <link rel="stylesheet" type="text/css" href="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/pygments.css">
    <link rel="stylesheet" type="text/css" href="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/bootstrap-sphinx.css">
    <script id="twitter-wjs" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/widgets.js"></script><script data-url_root="../../" id="documentation_options" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/documentation_options.js"></script>
    <script src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/jquery.js"></script>
    <script src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/underscore.js"></script>
    <script src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/doctools.js"></script>
    <link rel="search" title="Search" href="https://www.qgistutorials.com/en/search.html">
    <link rel="next" title="Running and Scheduling QGIS Processing Jobs" href="https://www.qgistutorials.com/en/docs/running_qgis_jobs.html">
    <link rel="prev" title="Building a Python Plugin (QGIS3)" href="https://www.qgistutorials.com/en/docs/3/building_a_python_plugin.html">


<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/jquery-fix.js"></script>
<script type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/bootstrap.min.js"></script>
<script type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/bootstrap-sphinx.js"></script>


<!-- Cookie Notice -->
<!-- Script from https://github.com/AOEpeople/cookie-notice -->
<script type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/cookie.notice.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-B1WQ7B80XJ');
</script>


  <script async="" type="text/javascript" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/count.js"></script><script type="text/javascript" async="" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/embed.js"></script><link rel="prefetch" as="style" href="https://c.disquscdn.com/next/embed/styles/lounge.8affdad980167da3f2dd9f1e933d0669.css"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/common.bundle.ee2555081038338ea4f41cbb3ea1bc17.js"><link rel="prefetch" as="script" href="https://c.disquscdn.com/next/embed/lounge.bundle.dc50d72ac077058faccdd9a761fea0bc.js"><link rel="prefetch" as="script" href="https://disqus.com/next/config.js"><script charset="utf-8" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/button.5d16ecc02fbaf599a24dfb57ab239320.js"></script></head><body data-new-gr-c-s-check-loaded="14.1027.0" data-gr-ext-installed="" style="">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://www.qgistutorials.com/en/index.html"><span><img src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/logo.png"></span>
          QGIS Tutorials and Tips</a>
        <span class="navbar-text navbar-version pull-left"><b>v1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button" id="dLabelGlobalToc" data-toggle="dropdown" data-target="#" href="https://www.qgistutorials.com/en/index.html">Tutorials List <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc" role="menu" aria-labelledby="dLabelGlobalToc"><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/introduction.html">Introduction</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/making_a_map.html">Making a Map (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/working_with_attributes.html">Working with Attributes (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/importing_spreadsheets_csv.html">Importing Spreadsheets or CSV files (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/basic_vector_styling.html">Basic Vector Styling (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/calculating_line_lengths.html">Calculating Line Lengths and Statistics (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/raster_styling_and_analysis.html">Basic Raster Styling and Analysis (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/raster_mosaicing_and_clipping.html">Raster Mosaicing and Clipping (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/working_with_terrain.html">Working with Terrain Data (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/working_with_wms.html">Working with WMS Data (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/working_with_projections.html">Working with Projections (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/georeferencing_basics.html">Georeferencing Topo Sheets and Scanned Maps (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/advanced_georeferencing.html">Georeferencing Aerial Imagery (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/digitizing_basics.html">Digitizing Map Data (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/performing_table_joins.html">Performing Table Joins (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/performing_spatial_joins.html">Performing Spatial Joins (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/creating_heatmaps.html">Creating Heatmaps (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/animating_time_series.html">Animating Time Series Data (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/handling_invalid_geometries.html">Handling Invalid Geometries (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/performing_spatial_queries.html">Performing Spatial Queries (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/nearest_neighbor_analysis.html">Nearest Neighbor Analysis (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/sampling_raster_data.html">Sampling Raster Data using Points or Polygons (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/interpolating_point_data.html">Interpolating Point Data (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/calculating_intersection_density.html">Calculating Street Intersection Density (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/batch_processing.html">Batch Processing using Processing Framework (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/processing_graphical_modeler.html">Automating Complex Workflows using Processing Modeler (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/automating_map_creation.html">Automating Map Creation with Print Layout Atlas (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/multi_criteria_overlay.html">Multi Criteria Overlay Analysis (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/basic_network_analysis.html">Basic Network Visualization and Routing (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/origin_destination_matrix.html">Locating Nearest Facility with Origin-Destination Matrix (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/service_area_analysis.html">Service Area Analysis using Openrouteservice (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/areal_mean_rainfall.html">Calculating Areal Mean Rainfall (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/getting_started_with_pyqgis.html">Getting Started With Python Programming (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/processing_algorithms_pyqgis.html">Running Processing Algorithms via Python (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/custom_python_functions.html">Using Custom Python Expression Functions (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/processing_python_scripts.html">Writing Python Scripts for Processing Framework (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/building_a_python_plugin.html">Building a Python Plugin (QGIS3)</a></li><li class="toctree-l1 current"><a class="current reference internal" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#">Building a Processing Plugin (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/running_qgis_jobs.html">Running and Scheduling QGIS Processing Jobs</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/web_mapping_with_qgis2web.html">Web Mapping with QGIS2Web (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/creating_basemaps_with_qtiles.html">Creating Basemaps with QTiles</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/using_plugins.html">Using Plugins (QGIS3)</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/downloading_osm_data.html">Searching and Downloading OpenStreetMap Data</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/learning_resources.html">QGIS Learning Resources</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/credits.html">Data Credits</a></li><li class="toctree-l1"><a class="reference internal" href="https://www.qgistutorials.com/en/docs/batch_processing.html">Batch Processing using Processing Framework (QGIS2)</a></li>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="https://www.qgistutorials.com/en/docs/3/building_a_python_plugin.html" title="Previous Chapter: Building a Python Plugin (QGIS3)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">« Building a Py...</span>
    </a>
  </li>
  <li>
    <a href="https://www.qgistutorials.com/en/docs/running_qgis_jobs.html" title="Next Chapter: Running and Scheduling QGIS Processing Jobs"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Running and S... »</span>
    </a>
  </li>
              
            
            

            

            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="https://www.qgistutorials.com/en/search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search">
 </div>
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav affix-top" role="complementary"><h4>Author</h4>
<p>Ujaval Gandhi</p>
<iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-follow-button twitter-follow-button-rendered" style="position: absolute; visibility: hidden; width: 0px; height: 0px;" title="Twitter Follow Button" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/follow_button.f88235f49a156f8b4cab34c7bc1a0acc.en.html" data-screen-name="spatialthoughts"></iframe>
<hr>
<p>Want to learn QGIS in a structured way? Check out <a href="https://spatialthoughts.com/" target="_blank">Spatial Thoughts Academy</a> for more learning materials and instructor-led online programs with QGIS.org certification.</p>

<hr>
<!-- EmailOctopus Form -->

<link rel="stylesheet" href="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/form.css">
<div class="emailoctopus-form-wrapper emailoctopus-form-default null" style="font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; color: rgb(26, 26, 26);">
  <p class="emailoctopus-heading">
    Subscribe to my newsletter
  </p>
  <p class="emailoctopus-success-message">
  </p>
  <p class="emailoctopus-error-message">
  </p>
  <form action="https://emailoctopus.com/lists/7325d131-1dbb-11eb-a3d0-06b4694bee2a/members/embedded/1.3/add" method="post" data-message-success="Thanks for subscribing!" data-message-missing-email-address="Your email address is required." data-message-invalid-email-address="Your email address looks incorrect, please try again." data-message-bot-submission-error="This doesn&#39;t look like a human submission." data-message-consent-required="Please check the checkbox to indicate your consent." data-message-invalid-parameters-error="This form has missing or invalid fields." data-message-unknown-error="Sorry, an unknown error has occurred. Please try again later." class="emailoctopus-form bound">
    <div class="emailoctopus-form-row">
      <label for="field_0">
        Email address
      </label>
      <input id="field_0" name="field_0" type="email" placeholder="" required="required">
    </div>
    <div aria-hidden="true" class="emailoctopus-form-row-hp">
      <input type="text" name="hpc4b27b6e-eb38-11e9-be00-06b4694bee2a" tabindex="-1" autocomplete="nope">
    </div>
    <div class="emailoctopus-form-row-subscribe">
      <input type="hidden" name="successRedirectUrl">
      <button type="submit" style="background-color: rgb(224, 224, 224); color: rgb(0, 0, 0); font-family: inherit;">
        Subscribe
      </button>
    </div>
  </form>
</div>
<script src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/form-embed.js">
</script>

<hr>


<h4>Change Language</h4>
<form role="form" class="sidebar-form sidebar-left">
<select id="languages" class="form-control select-mini">
  <option value="en">English</option>
  <option value="zh_TW">Chinese (Taiwan)</option>
  <option value="nl">Dutch</option>
  <option value="fi_FI">Finnish</option>
  <option value="fr">French</option>
  <option value="de">German</option>
  <option value="el">Greek</option>
  <option value="id">Indonesian</option>
  <option value="it">Italian</option>
  <option value="ko">Korean</option>
  <option value="fa">Persian</option>
  <option value="pt_BR">Portuguese</option>
  <option value="ro">Romanian</option>
  <option value="ru">Russian</option>
  <option value="sl">Slovenian</option>
  <option value="es">Spanish</option>
  <option value="th">Thai</option>
  <option value="tr">Turkish</option>
  <option value="uk">Ukrainian</option>
  <option value="vi">Vietnamese</option>
</select>
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      

  <section id="building-a-processing-plugin-qgis3">
<h1>Building a Processing Plugin (QGIS3)<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#building-a-processing-plugin-qgis3" title="Permalink to this headline">¶</a></h1>
<p>In the previous tutorial <a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/building_a_python_plugin.html"><span class="doc">Building a Python Plugin (QGIS3)</span></a>, you learnt how to create a python plugin - including the user interface and custom logic for processing the data. While these type of plugins are useful, it puts the burden of designing the user interface on the plugin author. This results in each plugin having different ways to interact with it - which is confusing to the users. Also, regular plugins do not interact with another parts of QGIS. For example, you cannot use the plugin functionality from another algorithm. If the plugin that you want to write is primarily for analysis, and the user interaction that you want is limited to letting the user pick inputs and outputs, there is a much easier and preferred way to write plugins using the Processing Framework. It removes the need for you to design the user interface - simplifying the process. The built-in processing library creates a standard processing interface depending on your inputs that looks and behaves just like any other processing algorithm in QGIS. It also seamlessly integrates with rest of the Processing framework - so your plugin algorithms can be used in batch processing, graphical modeler, called from python console etc.</p>
<section id="overview-of-the-task">
<h2>Overview of the Task<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#overview-of-the-task" title="Permalink to this headline">¶</a></h2>
<p>We will re-implement a simple plugin from the tutorial  <a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/building_a_python_plugin.html"><span class="doc">Building a Python Plugin (QGIS3)</span></a> as a processing plugin. It will result in a new processing provider called <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code> and an algorithm <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code> that will allow users to pick a vector layer and write its attributes to a CSV file.</p>
</section>
<section id="get-the-tools">
<h2>Get the Tools<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#get-the-tools" title="Permalink to this headline">¶</a></h2>
<section id="a-text-editor-or-a-python-ide">
<h3>A Text Editor or a Python IDE<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#a-text-editor-or-a-python-ide" title="Permalink to this headline">¶</a></h3>
<p>Any kind of software development requires a good text editor. If you already have a favorite text editor or an IDE (Integrated Development Environment), you may use it for this tutorial. Otherwise, each platform offers a wide variety of free or paid options for text editors. Choose the one that fits your needs.</p>
<p>This tutorial uses Notepad++ editor on Windows.</p>
<p><strong>Windows</strong></p>
<p><a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a> is a good free editor for windows.
Download and install the <a class="reference external" href="https://notepad-plus-plus.org/download/">Notepad++ editor</a>.</p>
<div class="admonition note alert alert-info">
<p class="admonition-title">Note</p>
<p>If you are using Notepad++, makes sure to go to <span class="menuselection">Settings ‣ Preferences ‣ Tab Settings</span> and enable <span class="guilabel">Replace by space</span>. Python is very sensitive about whitespace and this setting will ensure tabs and spaces are treated properly.</p>
</div>
</section>
<section id="plugin-builder-plugin">
<h3>Plugin Builder plugin<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#plugin-builder-plugin" title="Permalink to this headline">¶</a></h3>
<p>There is a helpful QGIS plugin named <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code> which creates all the necessary files and the boilerplate code for a plugin. Find and install the <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Builder</span></code> plugin. See <a class="reference internal" href="https://www.qgistutorials.com/en/docs/using_plugins.html"><span class="doc">Using Plugins</span></a> for more details on how to install plugins.</p>
</section>
<section id="plugins-reloader-plugin">
<h3>Plugins Reloader plugin<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#plugins-reloader-plugin" title="Permalink to this headline">¶</a></h3>
<p>This is another helper plugin which allows iterative development of plugins. Using this plugin, you can change your plugin code and have it reflected in QGIS without having to restart QGIS every time. Find and install the <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Reloader</span></code> plugin. See <a class="reference internal" href="https://www.qgistutorials.com/en/docs/using_plugins.html"><span class="doc">Using Plugins</span></a> for more details on how to install plugins.</p>
<div class="admonition note alert alert-info">
<p class="admonition-title">Note</p>
<p>Plugin Reloader is an experimental plugin. Make sure you have checked <span class="guilabel">Show also experimental plugins</span> in <span class="guilabel">Plugin Manager</span> settings if you cannot find it.</p>
</div>
</section>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#procedure" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Open QGIS. Go to <span class="menuselection">Plugins ‣ Plugin Builder ‣ Plugin Builder</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1109.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1109.png">
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>You will see the <span class="guilabel">QGIS Plugin Builder</span> dialog with a form. You can fill the form with details relating to our plugin. The <span class="guilabel">Class name</span> will be the name of the Python Class containing the logic of the plugin. This will also be the name of the folder containing all the plugin files. Enter <code class="docutils literal notranslate"><span class="pre">SaveAttributes</span></code> as the class name. The <span class="guilabel">Plugin name</span> is the name under which your plugin will appear in the    <span class="guilabel">Plugin Manager</span>. Enter the name as <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">(Processing)</span></code>. Add a description in the <span class="guilabel">Description</span> field. The <span class="guilabel">Module name</span> will be the name of the main python file for the plugin. Enter it as <code class="docutils literal notranslate"><span class="pre">save_attributes_processing</span></code>. Leave the version numbers as they are and enter your name and email address in the appropriate fields. Click <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/288.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/288.png">
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p>Enter a brief description of the plugin for the <span class="guilabel">About</span> dialog and click <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/344.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/344.png">
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Select the <code class="docutils literal notranslate"><span class="pre">Processing</span> <span class="pre">Provider</span></code> from the <span class="guilabel">Template</span> selector. The <span class="guilabel">Algorithm name</span> value will be how the users will find the processing algorithm in the Processing Toolox. Enter it as <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code>. Leave the <span class="guilabel">Algorithm group</span> blank. Enter the <span class="guilabel">Provider name</span> as <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code>. Enter a description in the <span class="guilabel">Provider description</span> field. Click <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/425.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/425.png">
</div></blockquote>
<ol class="arabic simple" start="5">
<li><p>Plugin builder will prompt you for the type of files to generate. Keep the default selection and click <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/525.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/525.png">
</div></blockquote>
<ol class="arabic simple" start="6">
<li><p>As we do not intend to publish the plugin, you may leave the <span class="guilabel">Bug tracker</span>, <span class="guilabel">Repository</span> and <span class="guilabel">Home page</span> values to default. Check the <span class="guilabel">Flag the plugin as experimental</span> box at the bottom and click <span class="guilabel">Next</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/625.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/625.png">
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>You will be prompted to choose a directory for your plugin. For now, save it to a directory you can locate easily on your computer and click <span class="guilabel">Generate</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/724.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/724.png">
</div></blockquote>
<ol class="arabic simple" start="8">
<li><p>Next, press the <span class="guilabel">generate</span> button. You will see a confirmation dialog once your plugin template is created.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/824.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/824.png">
</div></blockquote>
<div class="admonition note alert alert-info">
<p class="admonition-title">Note</p>
<p>You may get a prompt saying that pyrcc5 is not found in the path. You can ignore this message.</p>
</div>
<ol class="arabic simple" start="9">
<li><p>Plugins in QGIS are stored in a special folder. We must copy our plugin directory to that folder before it can be used. In QGIS, locate your current profile folder by going to <span class="menuselection">Settings ‣ User Profiles ‣ Open Active Profile Folder</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/924.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/924.png">
</div></blockquote>
<ol class="arabic simple" start="10">
<li><p>In the profile folder, copy the plugin folder to <span class="menuselection">python ‣ plugins</span> subfolder.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1025.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1025.png">
</div></blockquote>
<ol class="arabic simple" start="11">
<li><p>Now we are ready to have a first look at the brand new plugin we created. Close QGIS and launch it again. Go to <span class="menuselection">Plugins ‣ Manage and Install plugins</span> and enable the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">(Processing)</span></code> plugin in the <span class="guilabel">Installed</span> tab.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1128.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1128.png">
</div></blockquote>
<ol class="arabic simple" start="12">
<li><p>Go to <span class="menuselection">Processing ‣ Toolbox</span>. You will notice that there is a new provider at the bottom called <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span></code>. Expand it to find an algorithm named <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code>. Double-click to launch it.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1226.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1226.png">
</div></blockquote>
<ol class="arabic simple" start="13">
<li><p>You will notice a familiar processing algorithm dialog with a dropdown for an input layer and a selector for an output layer. We will now customize this dialog to suit our needs. Close this dialog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1325.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1325.png">
</div></blockquote>
<ol class="arabic" start="14">
<li><p>Go to the plugin directory and load the file <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code> in a text editor. For our plugin, we take a vector layer as an input and write out a CSV file as output. So instead of importing <code class="docutils literal notranslate"><span class="pre">QgsProcessingParameterFeatureSink</span></code> as output - which is for vector layer - add <code class="docutils literal notranslate"><span class="pre">QgsProcessingParameterFileDestination</span></code> which is for a file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QgsProcessing</span><span class="p">,</span>
                 <span class="n">QgsFeatureSink</span><span class="p">,</span>
                 <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span>
                 <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">,</span>
                 <span class="n">QgsProcessingParameterFileDestination</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, scroll down and define the output parameter under <code class="docutils literal notranslate"><span class="pre">initAlgorithm()</span></code> method with the following code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
      <span class="n">QgsProcessingParameterFileDestination</span><span class="p">(</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">'Output File'</span><span class="p">),</span>
          <span class="s1">'CSV files (*.csv)'</span><span class="p">,</span>
      <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/14a.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/14a.png">
<img alt="../../_images/14b.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/14b.png">
</div></blockquote>
<ol class="arabic simple" start="15">
<li><p>Let’s reload our plugin so we can see the changes in the dialog window. Go to <span class="menuselection">Plugin ‣ Plugin Reloader ‣ Choose a plugin to be reloaded</span>. Select <code class="docutils literal notranslate"><span class="pre">save_attributes_processing</span></code> in the <span class="guilabel">Configure Plugin reloader</span> dialog.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1523.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1523.png">
</div></blockquote>
<ol class="arabic simple" start="16">
<li><p>Click the <span class="guilabel">Reload plugin</span> button to load the latest version of the plugin. To test this new functionality, we must load some layers in QGIS. After you have loaded some layers, launch the <span class="menuselection">Save Attributes ‣ Save Attributes as CSV</span> algorithm. You will see the output is changed to a file instead of a layer.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1622.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1622.png">
</div></blockquote>
<ol class="arabic" start="17">
<li><p>Let’s add some logic to the algorithm that takes the selected vector layer and writes the attributes to a CSV file.  The explanation for this code can be found in <a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/getting_started_with_pyqgis.html"><span class="doc">Getting Started With Python Programming (QGIS3)</span></a>. Notable difference here is the counter that helps show the progress of the processing. Add the following code to the <code class="docutils literal notranslate"><span class="pre">processAlgorithm</span></code> method and save the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">processAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
  <span class="sd">"""</span>
<span class="sd">  Here is where the processing itself takes place.</span>
<span class="sd">  """</span>
  <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsSource</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
  <span class="n">csv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsFileOutput</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

  <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>

  <span class="c1"># Compute the number of steps to display within the progress bar and</span>
  <span class="c1"># get features from source</span>
  <span class="n">total</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
  <span class="n">features</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>

  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
    <span class="c1"># write header</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span>
    <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">features</span><span class="p">):</span>
        <span class="c1"># Stop the algorithm if cancel button has been clicked</span>
        <span class="k">if</span> <span class="n">feedback</span><span class="o">.</span><span class="n">isCanceled</span><span class="p">():</span>
            <span class="k">break</span>

        <span class="c1"># Add a feature in the sink</span>
        <span class="n">line</span> <span class="o">=</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span>
        <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="c1"># Update the progress bar</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">setProgress</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">current</span> <span class="o">*</span> <span class="n">total</span><span class="p">))</span>

  <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">csv</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/1723.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1723.png">
</div></blockquote>
<ol class="arabic simple" start="18">
<li><p>Back in the main QGIS window, reload the plugin by clicking on the <span class="guilabel">Reload plugin</span> button. Launch the <span class="menuselection">Save Attributes ‣ Save Attributes as CSV</span> algorithm. Select a layer for the <span class="guilabel">Input layer</span>. Next, click the <span class="guilabel">…</span> button next to <span class="guilabel">Output file</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1820.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1820.png">
</div></blockquote>
<ol class="arabic simple" start="19">
<li><p>Name the output file <code class="docutils literal notranslate"><span class="pre">test.csv</span></code> and click <span class="guilabel">Run</span>. The algorithm will run and produce a CSV file at the chosen location.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/1918.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/1918.png">
</div></blockquote>
<ol class="arabic simple" start="20">
<li><p>As mentioned earlier, even though this algorithm comes from a plugin, it integrates very well with the built-in processing tools. To demonstrate this, let’s run this algorithm using the built-in batch processing interface. Right-click the algorithm and select <span class="guilabel">Execute as Batch Process..</span>.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2014.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/2014.png">
</div></blockquote>
<ol class="arabic simple" start="21">
<li><p>You can select multiple inputs and run this algorithm in a batch to produce multiple CSV files in a single run. If you are not familiar with the batch processing interface, see <a class="reference internal" href="https://www.qgistutorials.com/en/docs/3/batch_processing.html"><span class="doc">Batch Processing using Processing Framework (QGIS3)</span></a> for step-by-step instructions.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2119.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/2119.png">
</div></blockquote>
<ol class="arabic simple" start="22">
<li><p>The plugin is ready and you can ship it in the current form. But we can improve the user experience by making the processing plugin behave like a regular plugin. Using the hybrid approach outlined below, you can add a menu item and a toolbar button. This way, you give the users an easier way to discover and launch the tools that are installed as part of the plugin. We will need an icon for the plugin. Download <a class="reference external" href="https://www.qgistutorials.com/downloads/logo.png">logo.png</a> and copy it to the plugin directory.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2217.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/2217.png">
</div></blockquote>
<ol class="arabic" start="23">
<li><p>Open the file <code class="docutils literal notranslate"><span class="pre">save_attributes_processing.py</span></code>. Add the following imports at top of the file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QAction</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span> <span class="n">QgsApplication</span>
<span class="kn">import</span> <span class="nn">processing</span>
</pre></div>
</div>
<p>Scroll down and modify the <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> method to initialize iface.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="kc">None</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>
</pre></div>
</div>
<p>Scroll down further and locate the <code class="docutils literal notranslate"><span class="pre">initGui</span></code> method. It only contains the code to initialize the processing provider. We will add the code to add a toolbar button and a menu item. We will also need to add code to the <code class="docutils literal notranslate"><span class="pre">unload</span></code> method, to remove these elements when plugin is removed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">initProcessing</span><span class="p">()</span>

  <span class="n">icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">))</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span>
      <span class="n">QIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">),</span>
      <span class="sa">u</span><span class="s2">"Save Attributes as CSV"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">"&amp;SaveAttributes"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">removeProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">"&amp;SaveAttributes"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
  <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
</pre></div>
</div>
<p>We have connected the button and the menu item to trigger the <code class="docutils literal notranslate"><span class="pre">run</span></code> method when clicked. Add a new method at the bottom that uses the helper method <code class="docutils literal notranslate"><span class="pre">execAlgorithmDialog</span></code> to launch the processing algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">processing</span><span class="o">.</span><span class="n">execAlgorithmDialog</span><span class="p">(</span><span class="s2">"Save Attributes:Save Attributes as CSV"</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/23a1.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/23a1.png">
<img alt="../../_images/23b1.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/23b1.png">
<img alt="../../_images/23c.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/23c.png">
</div></blockquote>
<ol class="arabic simple" start="24">
<li><p>Next, we need a minor fix to the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file in the plugin directory. Open the file and add <code class="docutils literal notranslate"><span class="pre">iface</span></code> to the return statement, so the reference to the QGIS interface is passed on to the plugin.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2413.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/2413.png">
</div></blockquote>
<ol class="arabic simple" start="25">
<li><p>Back in the main QGIS window, reload the plugin by clicking on the <span class="guilabel">Reload plugin</span> button. You will see a new toolbar icon and a menu item under <span class="menuselection">Plugins ‣ SaveAttributes ‣ Save Attributes as CSV</span>. You can click these to launch the <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">Attributes</span> <span class="pre">as</span> <span class="pre">CSV</span></code> algorithm. You will notice that the processing provider and the algorithm in the toolbar still have the default icons. Let’s fix that.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/2512.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/2512.png">
</div></blockquote>
<ol class="arabic" start="26">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_provider.py</span></code> file from the plugin directory. Add the imports at the top as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
</pre></div>
</div>
<p>Modify the <code class="docutils literal notranslate"><span class="pre">icon</span></code> method as follows to add the custom icon.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">icon</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/26a.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/26a.png">
<img alt="../../_images/26b.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/26b.png">
</div></blockquote>
<ol class="arabic" start="27">
<li><p>Next, open the <code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code> file. Add the imports at the top as follows.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>
</pre></div>
</div>
<p>Add a new <code class="docutils literal notranslate"><span class="pre">icon</span></code> method with the following code.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
  <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
  <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">icon</span>
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div><img alt="../../_images/27a.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/27a.png">
<img alt="../../_images/27b.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/27b.png">
</div></blockquote>
<ol class="arabic simple" start="28">
<li><p>Reload the plugin and you will see the provider and algorithm both have our custom icon.</p></li>
</ol>
<blockquote>
<div><img alt="../../_images/289.png" class="align-center" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/289.png">
</div></blockquote>
<ol class="arabic simple" start="29">
<li><p>You can zip the plugin directory and share it with your users. They can unzip the contents to their plugin directory and try out your plugin. If this was a real plugin, you would upload it to the <a class="reference external" href="https://plugins.qgis.org/">QGIS Plugin Repository</a> so that all QGIS users will be able to find and download your plugin.</p></li>
</ol>
<div class="admonition note alert alert-info">
<p class="admonition-title">Note</p>
<p>This plugin is for demonstration purpose only. Do not publish this plugin or
upload it to the QGIS plugin repository.</p>
</div>
<p>Below are the full source file as a reference.</p>
<p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">"""</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd"> This script initializes the plugin, making it known to QGIS.</span>
<span class="sd">"""</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">'Ujaval Gandhi'</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">'2019-09-18'</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">'(C) 2019 by Ujaval Gandhi'</span>


<span class="c1"># noinspection PyPep8Naming</span>
<span class="k">def</span> <span class="nf">classFactory</span><span class="p">(</span><span class="n">iface</span><span class="p">):</span>  <span class="c1"># pylint: disable=invalid-name</span>
    <span class="sd">"""Load SaveAttributes class from file SaveAttributes.</span>

<span class="sd">    :param iface: A QGIS interface instance.</span>
<span class="sd">    :type iface: QgsInterface</span>
<span class="sd">    """</span>
    <span class="c1">#</span>
    <span class="kn">from</span> <span class="nn">.save_attributes_processing</span> <span class="kn">import</span> <span class="n">SaveAttributesPlugin</span>
    <span class="k">return</span> <span class="n">SaveAttributesPlugin</span><span class="p">(</span><span class="n">iface</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">"""</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">"""</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">'Ujaval Gandhi'</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">'2019-09-18'</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">'(C) 2019 by Ujaval Gandhi'</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">'$Format:%H$'</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">inspect</span>

<span class="kn">from</span> <span class="nn">qgis.PyQt.QtWidgets</span> <span class="kn">import</span> <span class="n">QAction</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span> <span class="n">QgsApplication</span>
<span class="kn">import</span> <span class="nn">processing</span>
<span class="kn">from</span> <span class="nn">.save_attributes_processing_provider</span> <span class="kn">import</span> <span class="n">SaveAttributesProvider</span>

<span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">if</span> <span class="n">cmd_folder</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">cmd_folder</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SaveAttributesPlugin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span> <span class="o">=</span> <span class="n">iface</span>

    <span class="k">def</span> <span class="nf">initProcessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""Init Processing provider for QGIS &gt;= 3.8."""</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">provider</span> <span class="o">=</span> <span class="n">SaveAttributesProvider</span><span class="p">()</span>
        <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">addProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">initGui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initProcessing</span><span class="p">()</span>

        <span class="n">icon</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span>
            <span class="n">QIcon</span><span class="p">(</span><span class="n">icon</span><span class="p">),</span>
            <span class="sa">u</span><span class="s2">"Save Attributes as CSV"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">mainWindow</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addPluginToMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">"&amp;SaveAttributes"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">addToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">QgsApplication</span><span class="o">.</span><span class="n">processingRegistry</span><span class="p">()</span><span class="o">.</span><span class="n">removeProvider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removePluginMenu</span><span class="p">(</span><span class="sa">u</span><span class="s2">"&amp;SaveAttributes"</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iface</span><span class="o">.</span><span class="n">removeToolBarIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="n">processing</span><span class="o">.</span><span class="n">execAlgorithmDialog</span><span class="p">(</span><span class="s2">"Save Attributes:Save Attributes as CSV"</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing_algorithm.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">"""</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">"""</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">'Ujaval Gandhi'</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">'2019-09-18'</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">'(C) 2019 by Ujaval Gandhi'</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">'$Format:%H$'</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.PyQt.QtCore</span> <span class="kn">import</span> <span class="n">QCoreApplication</span>
<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QgsProcessing</span><span class="p">,</span>
                       <span class="n">QgsFeatureSink</span><span class="p">,</span>
                       <span class="n">QgsProcessingAlgorithm</span><span class="p">,</span>
                       <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">,</span>
                       <span class="n">QgsProcessingParameterFileDestination</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SaveAttributesAlgorithm</span><span class="p">(</span><span class="n">QgsProcessingAlgorithm</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    This is an example algorithm that takes a vector layer and</span>
<span class="sd">    creates a new identical one.</span>

<span class="sd">    It is meant to be used as an example of how to create your own</span>
<span class="sd">    algorithms and explain methods and variables used to do it. An</span>
<span class="sd">    algorithm like this will be available in all elements, and there</span>
<span class="sd">    is not need for additional work.</span>

<span class="sd">    All Processing algorithms should extend the QgsProcessingAlgorithm</span>
<span class="sd">    class.</span>
<span class="sd">    """</span>

    <span class="c1"># Constants used to refer to parameters and outputs. They will be</span>
    <span class="c1"># used when calling the algorithm from another algorithm, or when</span>
    <span class="c1"># calling from the QGIS console.</span>

    <span class="n">OUTPUT</span> <span class="o">=</span> <span class="s1">'OUTPUT'</span>
    <span class="n">INPUT</span> <span class="o">=</span> <span class="s1">'INPUT'</span>

    <span class="k">def</span> <span class="nf">initAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Here we define the inputs and output of the algorithm, along</span>
<span class="sd">        with some other properties.</span>
<span class="sd">        """</span>

        <span class="c1"># We add the input vector features source. It can have any kind of</span>
        <span class="c1"># geometry.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
            <span class="n">QgsProcessingParameterFeatureSource</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">'Input layer'</span><span class="p">),</span>
                <span class="p">[</span><span class="n">QgsProcessing</span><span class="o">.</span><span class="n">TypeVectorAnyGeometry</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># We add a file output of type CSV.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addParameter</span><span class="p">(</span>
            <span class="n">QgsProcessingParameterFileDestination</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">'Output File'</span><span class="p">),</span>
                <span class="s1">'CSV files (*.csv)'</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">processAlgorithm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">feedback</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Here is where the processing itself takes place.</span>
<span class="sd">        """</span>
        <span class="n">source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsSource</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">INPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">csv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterAsFileOutput</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="n">fieldnames</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">source</span><span class="o">.</span><span class="n">fields</span><span class="p">()]</span>

        <span class="c1"># Compute the number of steps to display within the progress bar and</span>
        <span class="c1"># get features from source</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">if</span> <span class="n">source</span><span class="o">.</span><span class="n">featureCount</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">features</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">()</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">output_file</span><span class="p">:</span>
          <span class="c1"># write header</span>
          <span class="n">line</span> <span class="o">=</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span>
          <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
          <span class="k">for</span> <span class="n">current</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">features</span><span class="p">):</span>
              <span class="c1"># Stop the algorithm if cancel button has been clicked</span>
              <span class="k">if</span> <span class="n">feedback</span><span class="o">.</span><span class="n">isCanceled</span><span class="p">():</span>
                  <span class="k">break</span>

              <span class="c1"># Add a feature in the sink</span>
              <span class="n">line</span> <span class="o">=</span> <span class="s1">','</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">name</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fieldnames</span><span class="p">)</span> <span class="o">+</span> <span class="s1">'</span><span class="se">\n</span><span class="s1">'</span>
              <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

              <span class="c1"># Update the progress bar</span>
              <span class="n">feedback</span><span class="o">.</span><span class="n">setProgress</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">current</span> <span class="o">*</span> <span class="n">total</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">:</span> <span class="n">csv</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the algorithm name, used for identifying the algorithm. This</span>
<span class="sd">        string should be fixed for the algorithm, and must not be localised.</span>
<span class="sd">        The name should be unique within each provider. Names should contain</span>
<span class="sd">        lowercase alphanumeric characters only and no spaces or other</span>
<span class="sd">        formatting characters.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">'Save Attributes as CSV'</span>

    <span class="k">def</span> <span class="nf">displayName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the translated algorithm name, which should be used for any</span>
<span class="sd">        user-visible display of the algorithm name.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">group</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the name of the group this algorithm belongs to. This string</span>
<span class="sd">        should be localised.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">groupId</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">groupId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the unique ID of the group this algorithm belongs to. This</span>
<span class="sd">        string should be fixed for the algorithm, and must not be localised.</span>
<span class="sd">        The group id should be unique within each provider. Group id should</span>
<span class="sd">        contain lowercase alphanumeric characters only and no spaces or other</span>
<span class="sd">        formatting characters.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">''</span>

    <span class="k">def</span> <span class="nf">tr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">QCoreApplication</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="s1">'Processing'</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Should return a QIcon which is used for your provider inside</span>
<span class="sd">        the Processing toolbox.</span>
<span class="sd">        """</span>
        <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">icon</span>
        
    <span class="k">def</span> <span class="nf">createInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">SaveAttributesAlgorithm</span><span class="p">()</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">save_attributes_processing_provider.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">"""</span>
<span class="sd">/***************************************************************************</span>
<span class="sd"> SaveAttributes</span>
<span class="sd">                                 A QGIS plugin</span>
<span class="sd"> This plugin adds an algorithm to save attributes of selected layer as a CSV file</span>
<span class="sd"> Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/</span>
<span class="sd">                              -------------------</span>
<span class="sd">        begin                : 2019-09-18</span>
<span class="sd">        copyright            : (C) 2019 by Ujaval Gandhi</span>
<span class="sd">        email                : ujaval@spatialthoughts.com</span>
<span class="sd"> ***************************************************************************/</span>

<span class="sd">/***************************************************************************</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> *   This program is free software; you can redistribute it and/or modify  *</span>
<span class="sd"> *   it under the terms of the GNU General Public License as published by  *</span>
<span class="sd"> *   the Free Software Foundation; either version 2 of the License, or     *</span>
<span class="sd"> *   (at your option) any later version.                                   *</span>
<span class="sd"> *                                                                         *</span>
<span class="sd"> ***************************************************************************/</span>
<span class="sd">"""</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">'Ujaval Gandhi'</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s1">'2019-09-18'</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s1">'(C) 2019 by Ujaval Gandhi'</span>

<span class="c1"># This will get replaced with a git SHA1 when you do a git archive</span>

<span class="n">__revision__</span> <span class="o">=</span> <span class="s1">'$Format:%H$'</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">from</span> <span class="nn">qgis.PyQt.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>

<span class="kn">from</span> <span class="nn">qgis.core</span> <span class="kn">import</span> <span class="n">QgsProcessingProvider</span>
<span class="kn">from</span> <span class="nn">.save_attributes_processing_algorithm</span> <span class="kn">import</span> <span class="n">SaveAttributesAlgorithm</span>


<span class="k">class</span> <span class="nc">SaveAttributesProvider</span><span class="p">(</span><span class="n">QgsProcessingProvider</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Default constructor.</span>
<span class="sd">        """</span>
        <span class="n">QgsProcessingProvider</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">unload</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Unloads the provider. Any tear-down steps required by the provider</span>
<span class="sd">        should be implemented here.</span>
<span class="sd">        """</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">loadAlgorithms</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Loads all algorithms belonging to this provider.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addAlgorithm</span><span class="p">(</span><span class="n">SaveAttributesAlgorithm</span><span class="p">())</span>
        <span class="c1"># add additional algorithms here</span>
        <span class="c1"># self.addAlgorithm(MyOtherAlgorithm())</span>

    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the unique provider id, used for identifying the provider. This</span>
<span class="sd">        string should be a unique, short, character only string, eg "qgis" or</span>
<span class="sd">        "gdal". This string should not be localised.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="s1">'Save Attributes'</span>

    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the provider name, which is used to describe the provider</span>
<span class="sd">        within the GUI.</span>

<span class="sd">        This string should be short (e.g. "Lastools") and localised.</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tr</span><span class="p">(</span><span class="s1">'Save Attributes'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Should return a QIcon which is used for your provider inside</span>
<span class="sd">        the Processing toolbox.</span>
<span class="sd">        """</span>
        <span class="n">cmd_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmd_folder</span><span class="p">,</span> <span class="s1">'logo.png'</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">icon</span>

    <span class="k">def</span> <span class="nf">longName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Returns the a longer version of the provider name, which can include</span>
<span class="sd">        extra details such as version numbers. E.g. "Lastools LIDAR tools</span>
<span class="sd">        (version 2.2.1)". This string should be localised. The default</span>
<span class="sd">        implementation returns the same string as name().</span>
<span class="sd">        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>





  <div id="disqus_thread"><iframe id="dsq-app9291" name="dsq-app9291" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 5935px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="https://www.qgistutorials.com/en/docs/3/processing_python_plugin.html#">Back to top</a>
      
    </p>
    <p>
        © Copyright 2019, Ujaval Gandhi.<br>
      Last updated on Jul 24, 2021.<br>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.0.1.<br>
    </p>
  </div>
</footer>
<div class="container">
  <p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/deed.en_US">Creative Commons Attribution 4.0 International License</a></p>
</div>
<!-- Twitter Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<!-- Disqus comments widget -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'qgistutorials'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>

<script type="text/javascript">
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!-- Script fpr language switching. Largely adapted from https://github.com/pcav/faunalia-website -->
<script>
    var currentPage = 'docs/3/processing_python_plugin.html'; // coming from sphinx, always without starting '/'
    var currentLang = 'en';
    $(document).ready(function(){

        var search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
        var langPlusPage = window.location.href.match(search);
        // it's possible this is a index.html page called without 'index.html', try without the currentPage
        if (langPlusPage==undefined){
            search = new RegExp('\/[a-zA-Z_]{2,8}\/$', 'gi');
            langPlusPage = window.location.href.match(search);
        }

        // it's possible this is an index.html page called without 'index.html', try removing index.html
        if (langPlusPage==undefined){
            currentPage = currentPage.replace('index.html','')
            search = new RegExp('\/[a-zA-Z_]{2,8}\/'+ currentPage, 'gi');
            langPlusPage = window.location.href.match(search);
        }
        // still no langPlugPage: stop, because the language swicher will misbehave 

        if (langPlusPage == undefined || langPlusPage.length != 1){
            alert('You hit an error, please report back to us.');
            return;
        }
        langPlusPage = langPlusPage[0];
        currentLang = langPlusPage.replace(currentPage, '');

        $("#languages").val(currentLang.replace(/\//g,'')); // currentLang is something like '/nl/'

        $("#languages").change(function() {
            gotoLang($(this).val());
        });

    });

    // load current page in a different language
    function gotoLang(lang){
        var currentUrl = window.location.href;
        var newUrl = currentUrl.replace(currentLang, '/'+lang+'/');
        window.location.href = newUrl;
    }
</script>

  
<div id="cookieNotice" data-test-section="cookie-notice" data-test-transitioning="false" style="position: fixed; bottom: 0px; left: 0px; right: 0px; background: rgb(0, 0, 0); color: rgb(255, 255, 255); z-index: 999; padding: 10px 5px; text-align: center; font-size: 12px; line-height: 28px; font-family: inherit;">We use cookies to ensure that you have the best experience on our website. If you continue to use this site we assume that you accept this.&nbsp;<span role="button" class="confirm" data-test-action="dismiss-cookie-notice" style="background: rgb(202, 80, 0); color: rgb(255, 255, 255); text-decoration: none; cursor: pointer; display: inline-block; padding: 0px 15px; margin: 0px 0px 0px 10px; font-family: inherit;">OK</span></div><script>mendeleyWebImporter = {
  downloadPdfs(t,e) { return this._call('downloadPdfs', [t,e]); },
  open() { return this._call('open', []); },
  setLoginToken(t) { return this._call('setLoginToken', [t]); },
  _call(methodName, methodArgs) {
    const id = Math.random();
    window.postMessage({ id, token: '0.8747463710943504', methodName, methodArgs }, 'https://www.qgistutorials.com');
    return new Promise(resolve => {
      const listener = window.addEventListener('message', event => {
        const data = event.data;
        if (typeof data !== 'object' || !('result' in data) || data.id !== id) return;
        window.removeEventListener('message', listener);
        resolve(data.result);
      });
    });
  }
};</script><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/widget_iframe.f88235f49a156f8b4cab34c7bc1a0acc.html" title="Twitter settings iframe" style="display: none;"></iframe><iframe style="display: none;" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/saved_resource(1).html"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./Building a Processing Plugin (QGIS3) — QGIS Tutorials and Tips_files/saved_resource(2).html"></iframe></body><grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration></html>